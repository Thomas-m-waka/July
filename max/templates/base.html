{% load static %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta author="Thomas">
  <title>Base</title>
  <link rel="stylesheet" href="{% static 'css/base.css' %}">

  <script>
    // Auto-hide flash messages after 5 seconds
    setTimeout(function() {
      var messages = document.getElementsByClassName("message");
      for (var i = 0; i < messages.length; i++) {
        messages[i].style.display = "none";
      }
    }, 5000);
  </script>
</head>
<body>
 
  <div class="header">
    <div class="sender">
      <img src="{% static 'images/Minimax.png' %}" class="minimax">
    
      
        <img src="{% static 'images/star.png' %}" class="star">
     
      
        <img src="{% static 'images/starr.png' %}" class="starr">
      </div>
    </div>
  </div>


    <!-- You can add content inside the header tag if needed -->
    <div class="success-messages ">
        {% if messages %}
        <div class="messages">
          {% for message in messages %}
          <div class="message {{ message.tags }}">
            {{ message }}
          </div>
          {% endfor %}
        </div>

      </div>
    
  </div>
<!-- HTML content with a logout button and other elements -->
<div>
  <!-- Your HTML content here -->
</div>
<style>
  .message {
      color: green;
      padding:4px;
      text-align: center;
     font-size: 20px;/* Set the text color to green */
    }
</style>
<script>
  // Set the timeout duration (30 minutes = 30 minutes * 60 seconds * 1000 milliseconds)
  const timeoutDuration = 30 * 60 * 1000;

  let logoutTimer;
  let countdownInterval;

  function startLogoutTimer() {
    logoutTimer = setTimeout(logout, timeoutDuration);
    startCountdown();
  }

  function startCountdown() {
    const startTime = Date.now();
    countdownInterval = setInterval(() => {
      const currentTime = Date.now();
      const remainingTime = timeoutDuration - (currentTime - startTime);
      updateCountdown(remainingTime);
      if (remainingTime <= 0) {
        logout();
      }
    }, 1000); // Update countdown every second (1000 milliseconds)
  }

  function updateCountdown(time) {
    const minutes = Math.floor(time / (1000 * 60));
    const seconds = Math.floor((time % (1000 * 60)) / 1000);
    // Update the countdown display on the page (replace 'countdown-display' with the actual ID or class name)
    document.getElementById('countdown-display').innerText = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
  }

  function logout() {
    // Implement your logout logic here
    // For example, redirect to the logout page or clear session data
    alert('You have been automatically logged out due to inactivity.');
  }

  // Event listeners to reset the timer on user activity
  document.addEventListener('mousemove', resetLogoutTimer);
  document.addEventListener('keydown', resetLogoutTimer);
  document.addEventListener('click', resetLogoutTimer);

  function resetLogoutTimer() {
    clearTimeout(logoutTimer);
    clearInterval(countdownInterval);
    startLogoutTimer();
  }

  // Start the initial timer
  startLogoutTimer();
</script>

</body>
</html>

{% endif %}
{% block content %}
{% endblock %}